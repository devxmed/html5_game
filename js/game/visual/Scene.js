var Scene=function(){var a,r,e,i,c,d={},s=[];d.shakeCamera=function(){function a(){(e-=1)%2==0?(r.scaleX=1.02,r.scaleY=1.02):(r.scaleX=.97,r.scaleY=.97),0===e&&(r.scaleX=1,r.scaleY=1,Laya.timer.clear(null,a))}var e=3;Laya.timer.frameLoop(1,null,a)},d.setCenter=function(){r.x=Map1.center.x,r.y=Map1.center.y,r.scale(1.5,1.5),Car.syncShadow(Map1.mainCar)},d.zoomOut=function(){Laya.timer.once(1e3,null,function(){Laya.Tween.to(r,{scaleX:1,scaleY:1,x:Map1.center.x-Map1.mainCar.x,y:Map1.center.y-Map1.mainCar.y},600)})},d.zoomIn=function(){Laya.Tween.to(r,{scaleX:1.5,scaleY:1.5},1e3)};var n,o=-2;d.update=function(){r.x=Map1.center.x-Map1.mainCar.x,r.y=Map1.center.y-Map1.mainCar.y,e.graphics.clear(),(n+=o)<20?(o*=-1,n=20):n>180&&(o*=-1,n=180),i.scaleX=(Map1.roadRadius+100)/921,i.scaleY=i.scaleX,Map1.roadRadius>.75*Map1.roadRadiusMax-100?(e.graphics.drawCircle(0,0,Map1.roadRadius+100,s[3]),e.graphics.drawCircle(0,0,.75*Map1.roadRadiusMax,s[2]),e.graphics.drawCircle(0,0,.5*Map1.roadRadiusMax,s[1]),e.graphics.drawCircle(0,0,.25*Map1.roadRadiusMax,s[0])):Map1.roadRadius>.5*Map1.roadRadiusMax-100?(e.graphics.drawCircle(0,0,Map1.roadRadius+100,s[2]),e.graphics.drawCircle(0,0,.5*Map1.roadRadiusMax,s[1]),e.graphics.drawCircle(0,0,.25*Map1.roadRadiusMax,s[0])):Map1.roadRadius>.25*Map1.roadRadiusMax-100?(e.graphics.drawCircle(0,0,Map1.roadRadius+100,s[1]),e.graphics.drawCircle(0,0,.25*Map1.roadRadiusMax,s[0])):e.graphics.drawCircle(0,0,Map1.roadRadius)},d.reset=function(){if(!0===d.firstColor)d.firstColor=!1;else for(var a=Math.floor(Math.random()*getDataLength("scene")),r=getData("scene",1+a),i=0;i<4;i++)s[i]="#"+r["color"+(i+1)];e.graphics.clear(),n=180,o=-2,d.update()};var t=[],l=0;return d.refreshWall=function(){for(var a=Math.floor(6*Math.random());a===l;)a=Math.floor(6*Math.random());l=a;for(var r=0;r<12;r++)t[r].skin="ui/wall_"+a+".png"},d.init=function(){a=new Laya.Sprite,Laya.stage.addChildAt(a,0),r=new Laya.Sprite,Scene.scene=r,a.addChild(r),(c=new Laya.Sprite).cacheAsBitmap=!0,Scene.mapLayer=c,r.addChild(c);var n=new Laya.Sprite;Scene.carLayer=n,r.addChild(n);var o=new Laya.Sprite;Scene.effectLayer=o,r.addChild(o),e=new Laya.Sprite,i=new Laya.Sprite;for(h=0;h<12;h++){var l=new Laya.Image;t[h]=l,l.skin="ui/wall_0.png",l.anchorX=.5,l.anchorY=.5;var p=(30*h-90)*Math.PI/180;l.x=921*Math.cos(p),l.y=921*Math.sin(p),l.rotation=30*h,i.addChild(l)}i.scaleX=(Map1.roadRadius+100)/921,i.scaleY=i.scaleX,r.addChildAt(i,0),r.addChildAt(e,0);for(var M=getData("scene",1),h=0;h<4;h++)s[h]="#"+M["color"+(h+1)];r.x=Laya.stage.width/2,r.y=Laya.stage.height/2,r.scale(1.5,1.5),Laya.Tween.from(r,{scaleX:0,scaleY:0},1e3,Laya.Ease.backOut),e.graphics.drawCircle(0,0,Map1.roadRadius+100,s[3]),e.graphics.drawCircle(0,0,.75*Map1.roadRadiusMax,s[2]),e.graphics.drawCircle(0,0,.5*Map1.roadRadiusMax,s[1]),e.graphics.drawCircle(0,0,.25*Map1.roadRadiusMax,s[0]),d.firstColor=!0},d}();