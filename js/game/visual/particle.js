var particle=function(){var a={};return a.create=function(a){var e={},t=[],r=a.textures,n=a.ang,i=a.speedMin,c=a.speedMax,s=a.scaleStartMin,o=a.scaleStartMax,l=a.scaleEndMin,d=a.scaleEndMax,h=a.dir,f=0,M=a.shootCD,p=a.minLife,u=a.maxLife;return e.active=!1,update=function(){if(0==f&&1==e.active){f=M;(L=new Laya.Image).skin=r[Math.floor(Math.random()*r.length)],L.anchorX=.5,L.anchorY=.5,L.rotation=360*Math.random(),L.scaleX=s+Math.random()*(o-s),L.scaleY=L.scaleX;var m=l+Math.random()*(d-l),v=a.src.rotation*Math.PI/180;L.x=a.src.x+-100*Math.cos(v),L.y=a.src.y+-100*Math.sin(v),L.dir=a.src.rotation+h+Math.random()*n,L.dir%=360,L.speed=i+Math.random()*(c-i),L.life=p+Math.random()*(u-p),a.dest.addChild(L),t.push(L),L.scaleDif=(m-L.scaleX)/L.life}else f>0&&(f-=1);for(var x=[],y=0;y<t.length;y++){var L=t[y],v=L.dir*Math.PI/180;L.x+=L.speed*Math.cos(v),L.y+=L.speed*Math.sin(v),L.scaleX+=L.scaleDif,L.scaleY+=L.scaleDif,L.life-=1,L.life<=0?L.parent.removeChild(L):x.push(L)}t=x},e.stop=function(){e.active=!1},e.restart=function(){e.active=!0},e.clear=function(){Laya.timer.clear(null,update);for(var a=0;a<t.length;a++)t[a].parent&&t[a].parent.removeChild(t[a]);t=[]},Laya.timer.frameLoop(1,null,update),e},a}();