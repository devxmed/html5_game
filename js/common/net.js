var Net=function(){function n(){o.connectByUrl("wss://solo-bmp.r2games.com:2264/")}function e(n){var e=JSON.parse(n);Game.time=e.time,User.checkDay(),Rank.syncScore(),UI.updateSeasonTime(),o.close()}function t(){null!==a?(c.sendMsg(a),a=null):c.sendMsg({type:"time"})}var o,c={},a=null,l=[];return c.addMsg=function(n,e){l.push([n,e])},c.removeMsg=function(n){for(var e=-1,t=0;t<l.length;t++)l[t][0]===n&&(e=t);-1!==e&&(l=l.slice(0,e).concat(l.slice(e+1,l.length)))},c.sendMsg=function(e){!0===o.connected?o.send(JSON.stringify(e)):(a=e,n())},c.init=function(){(o=new Laya.Socket).on(Laya.Event.OPEN,null,t),o.on(Laya.Event.MESSAGE,null,e),o.on(Laya.Event.CLOSE,null,function(){}),o.on(Laya.Event.ERROR,null,function(){Laya.timer.once(3e3,null,function(){n()})}),n()},c}();